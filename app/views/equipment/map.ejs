<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html>

<head>
    <% include ../includes/meta.ejs %>
    <!--/meta 作为公共模版分离出去-->
    <title>设备云监控</title>
    <link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css"/>
    <script src="http://webapi.amap.com/maps?v=1.4.0&key=29d2dc0f97050a4e13315f2e745ed6ce&plugin=AMap.MarkerClusterer"></script>
    <script type="text/javascript" src="http://cache.amap.com/lbs/static/addToolbar.js"></script>
</head>

<body>
    <!--_header 作为公共模版分离出去-->
    <% include ../includes/header.ejs %>
    <!--/_header 作为公共模版分离出去-->

    <aside class="Hui-aside">
        <div class="menu_dropdown bk_2">
                    <dl id="menu-article">
                        <dt><i class="Hui-iconfont">&#xe616;</i> 设备管理<i class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i></dt>
                        <dd style="display:block">
                            <ul>
                                <li ><a href="/equipment/list" title="设备列表">设备列表</a></li>
                                <li class="current"><a href="/equipment/map" title="设备监控">设备监控</a></li>
                            </ul>
                        </dd>
                    </dl>
                </div>
    </aside>
    <div class="dislpayArrow hidden-xs"><a class="pngfix" href="javascript:void(0);" onClick="displaynavbar(this)"></a></div>

    <section class="Hui-article-box">
            <nav class="breadcrumb">
                <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新" ><i class="Hui-iconfont">&#xe68f;</i></a>
            </nav>

            <nav class="breadcrumb" style="height:70%">
            <div id="container"></div>
            <div class="button-group">
                <input type="button" class="button" value="默认样式" id="add0" onclick = 'addCluster(0)'/>
                <input type="button" class="button" value="自定义图标" id="add1" onclick = 'addCluster(1)'/>
                <input type="button" class="button" value="完全自定义" id="add2" onclick = 'addCluster(2)'/>
            </div>
            </nav>
            <nav class="breadcrumb hehe"   style=" height:30%;width:100%">
                    <div style="position:absolute; height:100%;width:100%; overflow:auto;margin-top: 20px;margin-bottom: 20px;">
                            <table class="table table-border table-bordered table-bg table-sort"  >
                                    <thead>
                                        <tr class="text-c">
                                            <th width="70">报警参数</th>
                                            <th width="120">报警参数</th>
                                            <th width="120">报警参数</th>
                                            <th width="120">报警参数</th>
                                            <th width="120">报警参数</th>
                                            <th width="120">报警参数</th>
                                            <th width="120">报警参数</th>
                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="text-c">
                                            <td>data</td>
                                            <td>data </td>
                                            <td>data </td>
                                            <td>data </td>
                                            <td>data </td>
                                            <td>data </td>
                                            <td>data </td>
                                        </tr>
                                        <tr class="text-c">
                                                <td>data</td>
                                                <td>data </td>
                                                <td>data </td>
                                                <td>data </td>
                                                <td>data </td>
                                                <td>data </td>
                                                <td>data </td>
                                            </tr>
                                            <tr class="text-c">
                                                    <td>data</td>
                                                    <td>data </td>
                                                    <td>data </td>
                                                    <td>data </td>
                                                    <td>data </td>
                                                    <td>data </td>
                                                    <td>data </td>
                                                </tr>
                                                <tr class="text-c">
                                                        <td>data</td>
                                                        <td>data </td>
                                                        <td>data </td>
                                                        <td>data </td>
                                                        <td>data </td>
                                                        <td>data </td>
                                                        <td>data </td>
                                                    </tr>
                                                    <tr class="text-c">
                                                            <td>data</td>
                                                            <td>data </td>
                                                            <td>data </td>
                                                            <td>data </td>
                                                            <td>data </td>
                                                            <td>data </td>
                                                            <td>data </td>
                                                        </tr>
                                                        <tr class="text-c">
                                                                <td>data</td>
                                                                <td>data </td>
                                                                <td>data </td>
                                                                <td>data </td>
                                                                <td>data </td>
                                                                <td>data </td>
                                                                <td>data </td>
                                                            </tr>
                                                            <tr class="text-c">
                                                                    <td>data</td>
                                                                    <td>data </td>
                                                                    <td>data </td>
                                                                    <td>data </td>
                                                                    <td>data </td>
                                                                    <td>data </td>
                                                                    <td>data </td>
                                                                </tr>
                                                                <tr class="text-c">
                                                                        <td>data</td>
                                                                        <td>data </td>
                                                                        <td>data </td>
                                                                        <td>data </td>
                                                                        <td>data </td><td>data </td><td>data </td>
                                                                    </tr>
                                                                    <tr class="text-c">
                                                                            <td>谁说的</td>
                                                                            <td>谁说的</td>
                                                                            <td>谁说的</td>
                                                                            <td>谁说的</td>
                                                                            <td>谁说的</td>
                                                                            <td>谁说的</td>
                                                                            <td>谁说的</td>
                                                                        </tr>
                                                                        
                                    </tbody>
                                </table>
                    </div>
                
            </nav>

    </section>
    
        <% include ../includes/footer.ejs %>
        <script src="http://a.amap.com/jsapi_demos/static/china.js"></script>
        <script>
            var cluster, markers = [];
            var map = new AMap.Map("container", {
                resizeEnable: true,
                center:[105,34],
                zoom: 4
            });
            for(var i=0;i<points.length;i+=1){
                markers.push(new AMap.Marker({
                  position:points[i]['lnglat'],
                  content: '<div style="background-color: hsla(180, 100%, 50%, 0.7); height: 24px; width: 24px; border: 1px solid hsl(180, 100%, 40%); border-radius: 12px; box-shadow: hsl(180, 100%, 50%) 0px 0px 1px;"></div>',
                    offset: new AMap.Pixel(-15,-15)
                }))
            }
            var count  = markers.length;
            var _renderCluserMarker = function (context) {
                var factor = Math.pow(context.count/count,1/18)
                var div = document.createElement('div');
                var Hue = 180 - factor* 180;
                var bgColor = 'hsla('+Hue+',100%,50%,0.7)';
                var fontColor = 'hsla('+Hue+',100%,20%,1)';
                var borderColor = 'hsla('+Hue+',100%,40%,1)';
                var shadowColor = 'hsla('+Hue+',100%,50%,1)';
                div.style.backgroundColor = bgColor
                var size = Math.round(30 + Math.pow(context.count/count,1/5) * 20);
                div.style.width = div.style.height = size+'px';
                div.style.border = 'solid 1px '+ borderColor;
                div.style.borderRadius = size/2 + 'px';
                div.style.boxShadow = '0 0 1px '+ shadowColor;
                div.innerHTML = context.count;
                div.style.lineHeight = size+'px';
                div.style.color = fontColor;
                div.style.fontSize = '14px';
                div.style.textAlign = 'center';
                context.marker.setOffset(new AMap.Pixel(-size/2,-size/2));
                context.marker.setContent(div)
             }
            addCluster(2);
        
            function addCluster(tag) {
                if (cluster) {
                    cluster.setMap(null);
                }
                if (tag == 2) {//完全自定义
                    cluster = new AMap.MarkerClusterer(map,markers,{
                        gridSize:80,
                        renderCluserMarker:_renderCluserMarker
                    });
                } else if (tag == 1) {//自定义图标
                    var sts = [{
                        url: "http://a.amap.com/jsapi_demos/static/images/blue.png",
                        size: new AMap.Size(32, 32),
                        offset: new AMap.Pixel(-16, -16)
                    }, {
                        url: "http://a.amap.com/jsapi_demos/static/images/green.png",
                        size: new AMap.Size(32, 32),
                        offset: new AMap.Pixel(-16, -16)
                    }, {
                        url: "http://a.amap.com/jsapi_demos/static/images/orange.png",
                        size: new AMap.Size(36, 36),
                        offset: new AMap.Pixel(-18, -18)
                    },{
                        url: "http://a.amap.com/jsapi_demos/static/images/red.png",
                        size: new AMap.Size(48, 48),
                        offset: new AMap.Pixel(-24, -24)
                    },{
                        url: "http://a.amap.com/jsapi_demos/static/images/darkRed.png",
                        size: new AMap.Size(48, 48),
                        offset: new AMap.Pixel(-24, -24)
                    }];
                    cluster = new AMap.MarkerClusterer(map, markers, {
                        styles: sts,
                        gridSize:80
                    });
                } else {//默认样式
                    cluster = new AMap.MarkerClusterer(map, markers,{gridSize:80});
                }
            }
        </script>
   
</body>

</html>